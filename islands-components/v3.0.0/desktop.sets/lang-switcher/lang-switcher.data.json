{
  "name": "lang-switcher",
  "elems": [
    {
      "name": "lang",
      "title": [
        {
          "level": "common.blocks",
          "tech": "title.txt",
          "content": "Язык"
        }
      ]
    }
  ],
  "description": [
    {
      "level": "common.blocks",
      "tech": "desc.md",
      "content": "<h2 id=\"-\">Описание</h2>\n<p>Блок <code>lang-switcher</code> – переключатель языков для изменения языка интерфейса сервисов Яндекса. <a href=\"http://2-10.lego.yandex-team.ru/doc/concept/localization.wiki#Podderzhivaemyelokali\">Список поддерживаемых локализаций</a>. Реализован на основе блока <a href=\"../dropdown-menu/dropdown-menu.html\">dropdown-menu</a> и <a href=\"http://bem.github.io/bem-bl/sets/common-desktop/b-menu-vert/b-menu-vert.ru.html\">b-menu-vert</a>.</p>\n<p>Визуально представлен:</p>\n<ul>\n<li><strong>Указателем текущего языка</strong> (элемент <code>lang</code> с модификатором <code>selected</code> в значении <code>yes</code>), являющийся псевдо-ссылкой с иконкой флага.</li>\n<li><strong>Списком языков</strong> – выпадающее вертикальное меню, каждый элемент которого состоит из:<ul>\n<li><strong>Флага страны</strong> (элемент <code>flag</code> – служит для вставки иконки флага). Нужная иконка определяется по двухбуквенному коду языка, а не страны или доменной зоны.</li>\n<li><strong>Ссылки изменения языка</strong> (элемент <code>lang</code>) – представлена двухбуквенным кодом страны и ведет на отдельную страницу на <a href=\"http://wiki.yandex-team.ru/tune\">tune</a>, где выполняется выбор нужного языка. Ссылку содержат все элементы, кроме выбранного.</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"http://jing.yandex-team.ru/files/vikka/2013-12-18_2209.png\" alt=\"\"></p>\n<h3 id=\"-\">Объявление блока на странице</h3>\n<p>BEMJSON для использования блока:</p>\n<pre><code class=\"lang-js\">{\n    block: &#39;lang-switcher&#39;, // имя блока\n    lang: {code: &#39;ru&#39;, name: &#39;Ru&#39;}, // текущий язык интерфейса, выводится в указателе языка\n    content: [ // список языков\n        {\n            elem: &#39;lang&#39;,                     // язык\n            lang: {code: &#39;ua&#39;, name: &#39;Ua&#39;},   // параметр lang элемента lang\n            url: &#39;#&#39;                          // ссылка для выбора нужного языка\n        },\n        {\n            elem: &#39;lang&#39;,\n            lang: {code: &#39;en&#39;, name: &#39;En&#39;},\n            url: &#39;#&#39;\n        },\n        {\n            elem: &#39;lang&#39;,\n            lang: {code: &#39;ru&#39;, name: &#39;Ru&#39;},\n            mods: {selected: &#39;yes&#39;},          // выбранный язык\n            url: &#39;#&#39;\n        }\n    ]\n}</code></pre>\n<!-- %%lang-switcher.examples/10-simple/10-simple%% -->\n\n<h4 id=\"-\">Поля блока</h4>\n<ul>\n<li><code>{Object} lang</code> – выбранный язык. В BEMHTML-шаблоне преобразуется в элемент <code>lang</code>, которому по умолчанию добавляется модификатор <code>selected</code> в значении <code>yes</code>.</li>\n<li><code>{Boolean} noMore</code> – признак вывода ссылки «еще», которая используется для выбора нужного языка интерфейса на странице <a href=\"http://tune.yandex.ru/lang/?retpath=http%3A%2F%2Fwww.yandex.ua%2F\">tune</a>. Необязательное поле. Допустимые значения: <code>true</code> или <code>false</code>.</li>\n<li><code>{String} moreText</code> – текст ссылки для выбора языка интерфейса (по умолчанию локализованное слово «еще»). Переводы берутся из Танкера. Необязательное поле.</li>\n<li><p><code>{Array} content</code> – список языков.</p>\n</li>\n<li><p>элемент <code>lang</code> – язык интерфейса, в BEMJSON принимает параметр:</p>\n<ul>\n<li><p><code>{Object}lang</code>, где:</p>\n<ul>\n<li><code>{String} code</code> — код региона;</li>\n<li><code>{String} langCode</code> — код языка;</li>\n<li><code>{String} region</code> — входной хеш для <a href=\"https://lego.yandex-team.ru/desktop/common/blocks/i-geodata\">i-geodata</a>.</li>\n</ul>\n<pre><code class=\"lang-js\">{elem : &#39;lang&#39;, lang: {code: &#39;ua&#39;, name: &#39;украинский&#39;}}, //если известен код региона\n{elem : &#39;lang&#39;, lang: {langCode: &#39;uk&#39;, name: &#39;украинский&#39;}}, //если известен язык\n{elem : &#39;lang&#39;, lang: {region: {id : &#39;187&#39;}, name: &#39;украинский&#39;}} //можно найти регион по любому его признаку</code></pre>\n<p> Можно использовать любой из трех вариантов, нужный регион будет найден с помощью блока <a href=\"https://lego.yandex-team.ru/desktop/common/blocks/i-geodata\">i-geodata</a>.</p>\n</li>\n<li><p><code>{String} url</code> – ссылка изменения языка. Если ссылка не задана явно во входных данных блока <code>lang-switcher</code>(параметр <code>url</code> элемента <code>lang</code>), то она генерируется по следующему шаблону:</p>\n<pre><code class=\"lang-html\">%tune-host%/api/lang/v1.1/save.xml?intl=%lang-code%&amp;retpath=%params/retpath%&amp;sk=%secret-key%</code></pre>\n<p>где:</p>\n<ul>\n<li><code>tune-host</code> – адрес сервиса <a href=\"http://wiki.yandex-team.ru/tune tune\">tune</a> для данного региона, берется из блока <a href=\"https://lego.yandex-team.ru/desktop/common/blocks/i-services\">i-services</a> (список сервисов);</li>\n<li><p><code>secret-key</code> – сгенерированный секретный ключ, возвращаемый из <code>x:get-secret-key()</code>.\nСекретный ключ необходимо задавать явно в параметрах блока\n<a href=\"/desktop/common/blocks/i-global i-global\">i-global</a>:</p>\n<pre><code class=\"lang-js\">this[&#39;i-global&#39;][&#39;secret-key&#39;]</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"-\">Модификаторы</h3>\n<h4 id=\"-\">Выбор языка</h4>\n<p>При наличии у элемента <code>lang</code> модификатора <code>selected</code> в значении <code>yes</code> соответствующий язык будет выбран во всех локалях и отобразится в <strong>указателе языка</strong>.</p>\n<p>Переключатель языка различается в разных локалях. Отличия состоят в выбранном языке. Конкретный язык приобретает атрибут <code>selected</code> в процессе rebuild в том случае, если ни у одного из языков во входных данных нет такого атрибута (т.е не установлен модификатор <code>mods: {selected: &#39;yes&#39;}</code>).</p>\n<h4 id=\"-\">Переключатель языков с иконками флагов</h4>\n<p>Значения модификатора <code>icon</code> элемента <code>flag</code> – иконки флага для языков.\nДопустимые значения: <code>be</code>, <code>en</code>, <code>kk</code>, <code>ru</code>, <code>tr</code>, <code>tt</code>, <code>uk</code>.</p>\n<p>На этапе инициализации выполняется предварительная загрузка изображения флага для каждого модификатора <code>icon</code> элемента <code>flag</code>. Путь к изображению находится в CSS-свойстве <code>background-image</code>.</p>\n<p>Размер иконок <code>16x12px</code> в формате <code>svg</code>, деградирующем до <code>png</code>.</p>\n<hr>\n<p><strong>NB</strong>: Необходимо указать зависимости от нужных значений  модификатора <code>icon</code> элемента <code>flag</code>.</p>\n<hr>\n<h4 id=\"-\">Переключатель языков без иконок флагов</h4>\n<p>Модификатор блока <code>noflags</code> со значение <code>yes</code> – отключает вывод иконок флагов в переключателе языков, BEMJSON:</p>\n<pre><code class=\"lang-js\">{\n    block: &#39;lang-switcher&#39;,\n    lang: {code: &#39;ru&#39;, name: &#39;Ru&#39;},\n    mods: {noflags: &#39;yes&#39;}, // отключение отображения иконок флагов\n    content: [ //список языков\n        {\n            elem: &#39;lang&#39;,\n            lang: {langCode: &#39;be&#39;, name: &#39;Be&#39;}\n        },\n        ...\n    ]\n}</code></pre>\n<p>В данном случае, зависимости для значений модификаторов флагов <code>__flag_icon_*</code> добавлять не нужно.</p>\n<!-- %%lang-switcher.examples/15-without-flagse/15-without-flags%% -->\n\n\n<h3 id=\"-\">Итоговый список языков</h3>\n<p>Если в итоговом списке языков набирается менее двух, то переключатель не отображается.</p>\n<p>Если в итоговом списке языков меньше 4 и во входных данных блока отсутствует поле <code>noMore</code> – к списку будет добавлен элемент блока <code>all</code>, который преобразуется в ссылку на <a href=\"http://tune.yandex.ru/lang/?retpath=http%3A%2F%2Fwww.yandex.ua%2F\">tune</a> (страница настроек пользователя для выбора языка интерфейса).\nСсылке можно задать произвольный текст в поле <code>moreText</code> входного BEMJSON блока, или будет использовано значение по умолчанию – локализованное слово «еще» (перевод берется из Танкера).</p>\n"
    }
  ],
  "examples": [
    {
      "level": "common.blocks",
      "tech": "examples",
      "content": [
        {
          "url": "lang-switcher.examples/10-simple/10-simple",
          "title": "Простой набор языков"
        },
        {
          "url": "lang-switcher.examples/20-all/20-all",
          "title": "Простой набор языков с кнопкой Еще"
        }
      ]
    }
  ]
}